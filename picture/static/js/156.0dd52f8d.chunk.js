"use strict";(self.webpackChunkhi_react=self.webpackChunkhi_react||[]).push([[156],{156:function(t,i,s){s.r(i),s.d(i,{default:function(){return a}});var e=s(310),h=h||{json:null,screen:null,pointer:null,camera:null,loadJS:function(t,i,s){"string"==typeof t&&(t=[t]);for(var e=function(t){var e=document.createElement("script");i&&(e.readyState?e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,0===--n&&i(s||!1))}:e.onload=function(){0===--n&&i(s||!1)}),e.src=t,document.getElementsByTagName("head")[0].appendChild(e)},h=0,n=t.length;h<n;h++)e(t[h])}};h.Screen=function(t){h.screen=this,this.elem=document.getElementById(t.container)||t.container,this.ctx="CANVAS"==this.elem.tagName&&this.elem.getContext("2d"),this.style=this.elem.style,this.left=0,this.top=0,this.width=0,this.height=0,this.cursor="default",this.setup=t,this.resize=function(){var t=this.elem;for(this.width=t.offsetWidth,this.height=t.offsetHeight,this.left=0,this.top=0;null!=t;t=t.offsetParent)this.left+=t.offsetLeft,this.top+=t.offsetTop;this.ctx&&(this.elem.width=this.width,this.elem.height=this.height),this.setup.resize&&this.setup.resize()},this.setCursor=function(t){t!==this.cursor&&"ontouchstart"in window===!1&&(this.cursor=t,this.style.cursor=t)},window.addEventListener("resize",(function(){h.screen.resize()}),!1),!this.setup.resize&&this.resize()},h.Pointer=function(t){h.pointer=this;var i=this,s=document.body,e=document.documentElement;this.setup=t,this.screen=h.screen,this.elem=this.screen.elem,this.X=0,this.Y=0,this.Xi=0,this.Yi=0,this.bXi=0,this.bYi=0,this.Xr=0,this.Yr=0,this.startX=0,this.startY=0,this.scale=0,this.wheelDelta=0,this.isDraging=!1,this.hasMoved=!1,this.isDown=!1,this.evt=!1;var n=0,r=0;if(t.tap&&(this.elem.onclick=function(){return!1}),t.documentMove||(document.ontouchmove=function(t){t.preventDefault()}),document.addEventListener("MSHoldVisual",(function(t){t.preventDefault()}),!1),"undefined"!=typeof this.elem.style.msTouchAction&&(this.elem.style.msTouchAction="none"),this.pointerDown=function(t){this.isDown||(this.elem.setCapture&&this.elem.setCapture(),this.isDraging=!1,this.hasMoved=!1,this.isDown=!0,this.evt=t,this.Xr=void 0!==t.clientX?t.clientX:t.touches[0].clientX,this.Yr=void 0!==t.clientY?t.clientY:t.touches[0].clientY,this.X=n=this.Xr-this.screen.left,this.Y=r=this.Yr-this.screen.top+(e&&e.scrollTop||s.scrollTop),this.setup.down&&this.setup.down(t))},this.pointerMove=function(t){this.Xr=void 0!==t.clientX?t.clientX:t.touches[0].clientX,this.Yr=void 0!==t.clientY?t.clientY:t.touches[0].clientY,this.X=this.Xr-this.screen.left,this.Y=this.Yr-this.screen.top+(e&&e.scrollTop||s.scrollTop),this.isDown&&(this.Xi=this.bXi+(this.X-n),this.Yi=this.bYi-(this.Y-r)),(Math.abs(this.X-n)>11||Math.abs(this.Y-r)>11)&&(this.hasMoved=!0,this.isDown?this.isDraging?this.setup.drag&&this.setup.drag(t):(this.startX=n,this.startY=r,this.setup.startDrag&&this.setup.startDrag(t),this.isDraging=!0):(n=this.X,r=this.Y)),this.setup.move&&this.setup.move(t)},this.pointerUp=function(t){this.bXi=this.Xi,this.bYi=this.Yi,this.hasMoved?this.setup.up&&this.setup.up(this.evt):(this.X=n,this.Y=r,this.setup.tap&&this.setup.tap(this.evt)),this.isDraging=!1,this.isDown=!1,this.hasMoved=!1,this.setup.up&&this.setup.up(this.evt),this.elem.releaseCapture&&this.elem.releaseCapture(),this.evt=!1},this.pointerCancel=function(t){this.elem.releaseCapture&&this.elem.releaseCapture(),this.isDraging=!1,this.hasMoved=!1,this.isDown=!1,this.bXi=this.Xi,this.bYi=this.Yi,n=0,r=0},"ontouchstart"in window&&(this.elem.ontouchstart=function(t){return i.pointerDown(t),!1},this.elem.ontouchmove=function(t){return i.pointerMove(t),!1},this.elem.ontouchend=function(t){return i.pointerUp(t),!1},this.elem.ontouchcancel=function(t){return i.pointerCancel(t),!1}),document.addEventListener("mousedown",(function(t){(t.target===i.elem||t.target.parentNode&&t.target.parentNode===i.elem||t.target.parentNode.parentNode&&t.target.parentNode.parentNode===i.elem)&&("undefined"!=typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault(),i.pointerDown(t))}),!1),document.addEventListener("mousemove",(function(t){i.pointerMove(t)}),!1),document.addEventListener("mouseup",(function(t){i.pointerUp(t)}),!1),document.addEventListener("gesturechange",(function(t){return t.preventDefault(),t.scale>1?i.scale=.1:t.scale<1?i.scale=-.1:i.scale=0,i.setup.scale&&i.setup.scale(t),!1}),!1),window.navigator.msPointerEnabled){var o=0,a=new window.MSGesture;a.target=this.elem,this.elem.addEventListener("MSPointerDown",(function(t){t.pointerType==t.MSPOINTER_TYPE_TOUCH&&(a.addPointer(t.pointerId),o++)}),!1),this.elem.addEventListener("MSPointerOut",(function(t){t.pointerType==t.MSPOINTER_TYPE_TOUCH&&o--}),!1),this.elem.addEventListener("MSGestureHold",(function(t){t.preventDefault()}),!1),this.elem.addEventListener("MSGestureChange",(function(t){return o>1&&(t.preventDefault&&t.preventDefault(),i.scale=t.velocityExpansion,i.setup.scale&&i.setup.scale(t)),!1}),!1)}window.addEventListener&&this.elem.addEventListener("DOMMouseScroll",(function(t){return t.preventDefault&&t.preventDefault(),i.wheelDelta=10*t.detail,i.setup.wheel&&i.setup.wheel(t),!1}),!1),this.elem.onmousewheel=function(t){return i.wheelDelta=.25*-t.wheelDelta,i.setup.wheel&&i.setup.wheel(t),!1}},h.transform3D={},h.transform3D.drawPoly=function(){this.ctx.beginPath(),this.ctx.moveTo(this.points[0].X,this.points[0].Y),this.ctx.lineTo(this.points[1].X,this.points[1].Y),this.ctx.lineTo(this.points[2].X,this.points[2].Y),this.ctx.lineTo(this.points[3].X,this.points[3].Y),this.ctx.closePath()},h.transform3D.Camera=function(t,i){h.camera=this,this.x=0,this.y=0,this.z=0,this.rx=0,this.ry=0,this.rz=0,this.focalLength=t.focalLength||500,this.easeTranslation=t.easeTranslation||.1,this.easeRotation=t.easeRotation||.025,this.enableRx=!t.disableRx,this.enableRy=!t.disableRy,this.enableRz=!t.disableRz,this.cmov=!1,this.cosX=1,this.sinX=0,this.cosY=1,this.sinY=0,this.cosZ=1,this.sinZ=0,this.target={over:!1,elem:!1,x:0,y:0,z:0,rx:0,ry:0,rz:0},i&&i.move&&(this.cmov=i.move)},h.transform3D.Camera.prototype.ease=function(t,i){for(;Math.abs(t-i)>Math.PI;)t<i?i-=2*Math.PI:i+=2*Math.PI;return(t-i)*this.easeRotation},h.transform3D.Camera.prototype.move=function(){this.cmov&&this.cmov(),this.x+=(this.target.x-this.x)*this.easeTranslation,this.y+=(this.target.y-this.y)*this.easeTranslation,this.z+=(this.target.z-this.z)*this.easeTranslation,this.enableRx&&(this.rx+=this.ease(this.target.rx,this.rx),this.cosX=Math.cos(this.rx),this.sinX=Math.sin(this.rx)),this.enableRy&&(this.ry+=this.ease(this.target.ry,this.ry),this.cosY=Math.cos(this.ry),this.sinY=Math.sin(this.ry)),this.enableRz&&(this.rz+=this.ease(this.target.rz,this.rz),this.cosZ=Math.cos(this.rz),this.sinZ=Math.sin(this.rz))},h.transform3D.Point=function(t,i,s,e,h){this.x=t,this.y=i,this.z=s,this.tx=e||0,this.ty=h||0,this.visible=!1,this.scale=0,this.X=0,this.Y=0,this.Z=0,this.next=!0},h.transform3D.Point.prototype.projection=function(){var t=this.scr.width>>1,i=this.scr.height>>1,s=this.x-this.camera.x,e=this.y-this.camera.y,h=this.z-this.camera.z;if(this.camera.enableRz)var n=this.camera.sinZ*e+this.camera.cosZ*s,r=this.camera.cosZ*e-this.camera.sinZ*s;else n=s,r=e;var o=this.camera.cosY*h+this.camera.sinY*n;return this.Z=this.camera.cosX*o-this.camera.sinX*r,this.scale=this.camera.focalLength/Math.max(1,this.Z),this.X=t+(this.camera.cosY*n-this.camera.sinY*h)*this.scale,this.Y=-(this.camera.y>>1)+i-(this.camera.sinX*o+this.camera.cosX*r)*this.scale,this.visible=this.X>.5*-t&&this.X<2.5*t&&this.Y>.5*-i&&this.Y<2.5*i,this.next},h.transform3D.Triangle=function(t,i,s,e){this.ctx=t.ctx,this.texture=t.texture,this.p0=i,this.p1=s,this.p2=e,this.d=i.tx*(e.ty-s.ty)-s.tx*e.ty+e.tx*s.ty+(s.tx-e.tx)*i.ty,this.pmy=s.ty-e.ty,this.pmx=s.tx-e.tx,this.pxy=e.tx*s.ty-s.tx*e.ty,t.t&&(t.t.next=!0)},h.transform3D.Triangle.prototype.draw=function(){if(this.p0.visible||this.p1.visible||this.p2.visible){var t,i,s,e=(this.p0.X+this.p1.X+this.p2.X)/3,h=(this.p0.Y+this.p1.Y+this.p2.Y)/3;this.ctx.save(),this.ctx.beginPath(),t=e-this.p0.X,i=h-this.p0.Y,s=Math.max(Math.abs(t),Math.abs(i)),this.ctx.moveTo(this.p0.X-t/s*2,this.p0.Y-i/s*2),t=e-this.p1.X,i=h-this.p1.Y,s=Math.max(Math.abs(t),Math.abs(i)),this.ctx.lineTo(this.p1.X-t/s*2,this.p1.Y-i/s*2),t=e-this.p2.X,i=h-this.p2.Y,s=Math.max(Math.abs(t),Math.abs(i)),this.ctx.lineTo(this.p2.X-t/s*2,this.p2.Y-i/s*2),this.ctx.closePath(),this.ctx.clip();var n=this.p2.X-this.p1.X,r=this.p1.Y-this.p2.Y,o=this.p2.ty*this.p1.X,a=this.p1.tx*this.p2.X,l=this.p2.ty*this.p1.Y,c=this.p1.ty*this.p2.X,p=this.p1.ty*this.p2.Y,u=this.p2.tx*this.p1.X,m=this.p1.tx*this.p2.Y,d=this.p2.tx*this.p1.Y;this.ctx.transform(-(this.p0.ty*n-c+o+this.pmy*this.p0.X)/this.d,(p+this.p0.ty*r-l-this.pmy*this.p0.Y)/this.d,(this.p0.tx*n-a+u+this.pmx*this.p0.X)/this.d,-(m+this.p0.tx*r-d-this.pmx*this.p0.Y)/this.d,(this.p0.tx*(o-c)+this.p0.ty*(a-u)+this.pxy*this.p0.X)/this.d,(this.p0.tx*(l-p)+this.p0.ty*(m-d)+this.pxy*this.p0.Y)/this.d),this.ctx.drawImage(this.texture,0,0),this.ctx.restore()}return this.next},h.transform3D.Image=function(t,i,s,e){this.parent=t,this.points=[],this.triangles=[],this.ctx=h.screen.ctx,this.pointer=h.pointer,this.texture=new Image,this.texture.src=i,this.isLoading=!0,this.callback=e,this.textureWidth=0,this.textureHeight=0,this.level=s||1,this.visible=!1,this.t=!1,this.dir=void 0,h.transform3D.Point.prototype.scr||(h.transform3D.Point.prototype.scr=h.screen,h.transform3D.Point.prototype.camera=h.camera)},h.transform3D.Image.prototype.drawPoly=h.transform3D.drawPoly,h.transform3D.Image.prototype.setLevel=function(t){this.points.length=0,this.triangles.length=0,this.level=t,this.loading()},h.transform3D.Image.prototype.loading=function(){if(this.texture.complete){this.isLoading=!1;var t=this.texture.width,i=this.texture.height;this.dir=this.dir||[0,t,t,0,0,0,i,i];var s=t/i;this.texture.width=700,this.texture.height=700/s,this.textureWidth=this.texture.width,this.textureHeight=this.texture.height,this.callback&&this.callback.isLoaded&&this.callback.isLoaded(this);for(var e,h=-1;e=this.points[++h];)e.tx=this.dir[h],e.ty=this.dir[h+4];this.triangulate(this.points[0],this.points[1],this.points[2],this.level),this.triangulate(this.points[0],this.points[2],this.points[3],this.level),this.points[this.points.length-1].next=!1}},h.transform3D.Image.prototype.subdivise=function(t,i){return{x:.5*(i.x+t.x),y:.5*(i.y+t.y),z:.5*(i.z+t.z),tx:.5*(i.tx+t.tx),ty:.5*(i.ty+t.ty)}},h.transform3D.Image.prototype.triangulate=function(t,i,s,e){if(0===--e)this.t=new h.transform3D.Triangle(this,t,i,s),this.triangles.push(this.t);else{var n=this.subdivise(t,i),r=this.subdivise(i,s),o=this.subdivise(s,t);this.points.push(n=new h.transform3D.Point(n.x,n.y,n.z,n.tx,n.ty)),this.points.push(r=new h.transform3D.Point(r.x,r.y,r.z,r.tx,r.ty)),this.points.push(o=new h.transform3D.Point(o.x,o.y,o.z,o.tx,o.ty)),this.triangulate(t,n,o,e),this.triangulate(n,i,r,e),this.triangulate(o,r,s,e),this.triangulate(n,r,o,e)}},h.transform3D.Image.prototype.transform3D=function(t){if(this.isLoading)return this.loading(),!1;for(var i=0;this.points[i++].projection(););if(t){var s=this.points[0],e=this.points[1],h=this.points[2];return(e.Y-s.Y)/(e.X-s.X)-(h.Y-s.Y)/(h.X-s.X)<0^s.X<=e.X==s.X>h.X}return!0},h.transform3D.Image.prototype.draw=function(){if(!this.isLoading)for(var t=0;this.triangles[t++].draw(););},h.transform3D.Image.prototype.isPointerInside=function(t,i){return this.drawPoly(this.points),this.ctx.isPointInPath(t,i)},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,16)};var n=h;function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"html",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.querySelector(t).classList[i](s)}var o=s(388);var a=function(){for(var t=[],i=function(){var i=Math.random()*window.pictureConfig.data.length|0;t.push(window.pictureConfig.data.find((function(t,s){return s===i})).path)},s=0;s<12;s++)i();return(0,e.useEffect)((function(){return r("html","add","html_photoWall_extends"),r("body","add","body_photoWall_extends"),function(){var t,i,s,e,h,r=[],o=[],a=0,l=[1,2],c=function(i,s){if(this.parent=i,this.ctx=t,this.color=s.fill||!1,this.points=[],!s.img){for(var e=0;e<4;e++)this.points[e]=new n.transform3D.Point(i.pc.x+s.x[e]*i.normalZ+s.z[e]*i.normalX,i.pc.y+s.y[e],i.pc.z+s.x[e]*i.normalX+-s.z[e]*i.normalZ);this.points[3].next=!1}},p=function(t,i,s){this.img=new n.transform3D.Image(this,t+i.img,1,{isLoaded:function(t){t.parent.isLoaded=!0,t.parent.loaded(t)}}),this.visible=!1,this.normalX=i.nx,this.normalZ=i.nz,this.pc=new n.transform3D.Point(i.x,i.y,i.z),this.tx=i.x+i.nx*Math.sqrt(e.focalLength)*20,this.tz=i.z-i.nz*Math.sqrt(e.focalLength)*20,this.poly=[];for(var h,r=-1;h=s[++r];)o[r]=!0===h.img?1:2,this.poly.push(new c(this,h))},u=function n(){t.clearRect(0,0,s.width,s.height),e.move();for(var l,c=-1;l=o[++c];){h=!1;for(var p,u=0;p=r[u++];)1===l&&p.draw()||p.visible&&p.poly[c].draw()}e.over&&!i.isDraging?s.setCursor("pointer"):s.setCursor("move"),a++,window.requestAnimFrame(n)};return c.prototype.draw=function(){var i=this.color;if(i.light||!h){var s=i.light?this.parent.light:1;h="rgba("+Math.round(i.r*s)+","+Math.round(i.g*s)+","+Math.round(i.b*s)+","+(i.a||1)+")",t.fillStyle=h}if(!i.light||this.parent.light<1){for(var e=0;this.points[e++].projection(););this.drawPoly(),t.fill()}},p.prototype.loaded=function(t){for(var i=[-1,1,1,-1,1,1,-1,-1],s=.5*t.texture.width,e=.5*t.texture.height,h=0;h<4;h++)t.points[h]=new n.transform3D.Point(this.pc.x+s*this.normalZ*i[h],this.pc.y+e*i[h+4],this.pc.z+s*this.normalX*i[h])},p.prototype.draw=function(){return this.pc.projection(),this.pc.Z>-(e.focalLength>>1)&&this.img.transform3D(!0)?(this.light=.5+.6*Math.abs(this.normalZ*e.cosY-this.normalX*e.sinY),this.visible=!0,this.img.draw(),(i.hasMoved||i.isDown)&&this.img.isPointerInside(i.X,i.Y)&&(e.over=this)):this.visible=!1,!0},{load:function(h){setTimeout((function(){!function(h){c.prototype.drawPoly=n.transform3D.drawPoly,s=new n.Screen({container:"canvas"}),t=s.ctx,s.resize(),i=new n.Pointer({tap:function(){if(e.over)if(e.over===e.target.elem)e.target.x=0,e.target.z=0,e.target.elem=!1;else{e.target.elem=e.over,e.target.x=e.over.tx,e.target.z=e.over.tz;for(var t,i=0;t=r[i++];){var s=e.target.x-t.pc.x,h=e.target.z-t.pc.z,n=Math.sqrt(s*s+h*h)>1500?l[0]:l[1];t.img.setLevel(n)}}}}),(e=new n.transform3D.Camera({focalLength:10*Math.sqrt(s.width),easeTranslation:.025,easeRotation:.06,disableRz:!0},{move:function(){this.over=!1,i.isDraging?(this.target.elem=!1,this.target.ry=.01*-i.Xi,this.target.rx=(i.Y-.5*s.height)/(.5*s.height)):this.target.elem&&(this.target.ry=Math.atan2(this.target.elem.pc.x-this.x,this.target.elem.pc.z-this.z)),this.target.rx*=.9}})).z=-1e4,e.py=0;for(var o,m=0;o=h.imgdata[m++];)r.push(new p(h.options.imagesPath,o,h.structure));setInterval((function(){l=a>50?[2,3]:[1,2],a=0}),1e3),u()}(h)}),500)}}}().load({imgdata:[{img:t[1],x:-1e3,y:0,z:1500,nx:0,nz:1},{img:t[2],x:0,y:0,z:1500,nx:0,nz:1},{img:t[3],x:1e3,y:0,z:1500,nx:0,nz:1},{img:t[4],x:1500,y:0,z:1e3,nx:-1,nz:0},{img:t[5],x:1500,y:0,z:0,nx:-1,nz:0},{img:t[6],x:1500,y:0,z:-1e3,nx:-1,nz:0},{img:t[7],x:1e3,y:0,z:-1500,nx:0,nz:-1},{img:t[8],x:0,y:0,z:-1500,nx:0,nz:-1},{img:t[9],x:-1e3,y:0,z:-1500,nx:0,nz:-1},{img:t[10],x:-1500,y:0,z:-1e3,nx:1,nz:0},{img:t[11],x:-1500,y:0,z:0,nx:1,nz:0},{img:t[0],x:-1500,y:0,z:1e3,nx:1,nz:0}],structure:[{fill:{r:255,g:255,b:255,light:1},x:[-1001,-490,-490,-1001],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[-501,2,2,-500],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[0,502,502,0],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[490,1002,1002,490],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:0,g:0,b:0,a:.2},x:[-420,420,420,-420],z:[-500,-500,-500,-500],y:[150,150,-320,-320]},{fill:{r:0,g:0,b:0,a:.2},x:[-20,20,20,-20],z:[-500,-500,-500,-500],y:[250,250,150,150]},{fill:{r:0,g:0,b:0,a:.2},x:[-20,20,20,-20],z:[-500,-500,-500,-500],y:[-320,-320,-500,-500]},{fill:{r:0,g:0,b:0,a:.2},x:[-20,20,10,-10],z:[-500,-500,-100,-100],y:[-500,-500,-500,-500]},{fill:{r:32,g:32,b:32},x:[-50,50,50,-50],z:[-150,-150,-50,-50],y:[-500,-500,-500,-500]},{fill:{r:16,g:16,b:16},x:[-10,10,10,-10],z:[-100,-100,-100,-100],y:[300,300,-500,-500]},{fill:{r:255,g:255,b:255},x:[-320,-320,-320,-320],z:[0,-20,-20,0],y:[-190,-190,190,190]},{fill:{r:255,g:255,b:255},x:[320,320,320,320],z:[0,-20,-20,0],y:[-190,-190,190,190]},{img:!0},{fill:{r:255,g:128,b:0},x:[-50,50,50,-50],z:[450,450,550,550],y:[500,500,500,500]},{fill:{r:255,g:128,b:0},x:[-50,50,50,-50],z:[450,450,550,550],y:[-500,-500,-500,-500]}],options:{imagesPath:""}}),function(){r("html","remove","html_photoWall_extends"),r("body","remove","body_photoWall_extends")}})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("canvas",{id:"canvas",children:"\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301HTML5\u753b\u5e03\u6280\u672f\uff0c\u8bf7\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668\u3002"})})}}}]);