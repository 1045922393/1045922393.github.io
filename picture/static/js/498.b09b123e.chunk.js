"use strict";(self.webpackChunkhi_react=self.webpackChunkhi_react||[]).push([[498],{8703:function(e,n,i){i.d(n,{Z:function(){return t}});var a=i(6302),r=i(2388);var t=function(e){var n=(0,a.s0)();return(0,r.jsx)("div",{className:"back_btn",style:e.style,onClick:function(){n(e.path||"/")},children:e.text||"B"})}},3498:function(e,n,i){i.r(n),i.d(n,{default:function(){return k}});var a=i(2398),r=i(2310),t=i(8703),c=i(2334),s=i(4454),d=i(7799),o=i(2388),u=60,m=[[{id:"00",name:"\u5c06",num:1,power:7,mark:10,remain:1},{id:"01",name:"\u58eb",num:2,power:6,mark:8,remain:2},{id:"02",name:"\u8c61",num:2,power:5,mark:6,remain:2},{id:"03",name:"\u8f66",num:2,power:4,mark:5,remain:2},{id:"04",name:"\u9a6c",num:2,power:3,mark:4,remain:2},{id:"05",name:"\u70ae",num:2,power:2,mark:3,remain:2},{id:"06",name:"\u5352",num:5,power:1,mark:2,remain:5}],[{id:"10",name:"\u5e05",num:1,power:7,mark:10,remain:1},{id:"11",name:"\u4ed5",num:2,power:6,mark:8,remain:2},{id:"12",name:"\u76f8",num:2,power:5,mark:6,remain:2},{id:"13",name:"\u8f66",num:2,power:4,mark:5,remain:2},{id:"14",name:"\u9a6c",num:2,power:3,mark:4,remain:2},{id:"15",name:"\u70ae",num:2,power:2,mark:3,remain:2},{id:"16",name:"\u5175",num:5,power:1,mark:2,remain:5}]];function l(e){return JSON.parse(JSON.stringify(e||{}))}function f(e){var n=[];return e.forEach((function(e){n=n.concat(new Array(e.num).fill(l(e)))})),n}var h=[].concat(f(m[0]),f(m[1]));function v(e,n){return Math.floor(Math.random()*(n-e+1)+e)}var p=null;var k=function(){var e=(0,r.useState)([]),n=(0,a.Z)(e,2),i=n[0],m=n[1],f=(0,r.useState)([]),k=(0,a.Z)(f,2),w=k[0],x=k[1],b=(0,r.useState)({black:u,red:u}),j=(0,a.Z)(b,2),N=j[0],y=j[1],S=(0,r.useState)({}),Z=(0,a.Z)(S,2),g=Z[0],M=Z[1],_=(0,r.useState)(""),O=(0,a.Z)(_,2),C=O[0],J=O[1],E=(0,r.useState)(""),A=(0,a.Z)(E,2),T=A[0],z=A[1],B=(0,r.useState)(""),H=(0,a.Z)(B,2),I=H[0],R=H[1],W=(0,r.useState)(u),q=(0,a.Z)(W,2),D=q[0],F=q[1],G=(0,r.useState)(u),K=(0,a.Z)(G,2),L=K[0],P=K[1],Q=(0,r.useMemo)((function(){var e=(u-D)/u*100;return e>=100&&(e=100,R("\u6e38\u620f\u7ed3\u675f, \u7ea2\u8272\u65b9\u80dc")),e+"%"}),[D]),U=(0,r.useMemo)((function(){var e=(u-L)/u*100;return e>=100&&(e=100,R("\u6e38\u620f\u7ed3\u675f, \u9ed1\u8272\u65b9\u80dc")),e+"%"}),[L]),V=function(){z(Math.abs(T-1)+"")},X=(0,r.useMemo)((function(){return!!I}),[I]);(0,r.useEffect)((function(){clearTimeout(p),p=setTimeout((function(){R("")}),2e3)}),[I]),(0,r.useEffect)((function(){var e=window.innerHeight,n=8,i=4;window.innerWidth<e&&(n=4,i=8);var a=new Array(n).fill(new Array(i).fill(null));a.forEach((function(e,n){a[n]=a[n].map((function(){return function(){var e=v(0,h.length-1),n=l(h.splice(e,1)[0]);return n.hide=!0,n}()}))})),z(v(0,1)+""),J(window.pictureConfig.data[1].path),m(a),x(a)}),[]);var Y=function(){x(l(i))},$=(0,r.useState)(!1),ee=(0,a.Z)($,2),ne=ee[0],ie=ee[1],ae=function(e,n,a){Y(),i[n][a]=l(g),i[n][a].x=n,i[n][a].y=a,i[g.x][g.y]={},m(l(i)),M({}),V(),ie(!1)},re=function(e){"0"===e.id[0]?F(D-e.mark):"1"===e.id[0]&&P(L-e.mark)},te=function(e,n,a){var r;if(console.log(e,n,a),!e.hide||"5"===(null===(r=g.id)||void 0===r?void 0:r[1]))return"{}"===JSON.stringify(g)?e.id[0]!==T?void R("\u8bf7\u64cd\u4f5c\u81ea\u5df1\u7684\u68cb\u5b50"):void M(e):void(g.x!==n||g.y!==a?function(e,n,i){if("5"===g.id[1]&&(g.x!==n||g.y!==i)&&"{}"!==JSON.stringify(e)&&(g.x===n||g.y===i)&&1!==Math.abs(n+i-(g.x+g.y)))return ae(0,n,i),y({black:D,red:L}),void re(e);if(1!==Math.abs(n+i-(g.x+g.y)))return R("\u975e\u6cd5\u64cd\u4f5c"),void M({});if("{}"!==JSON.stringify(e)||"5"===g.id[1]){if("5"!==g.id[1]&&(1===g.power&&7===e.power||g.power>=e.power)&&g.power-e.power!==6&&g.id[0]!==e.id[0])return ae(0,n,i),y({black:D,red:L}),void re(e);R("\u975e\u6cd5\u64cd\u4f5c"),M({})}else ae(0,n,i)}(e,n,a):M({}));!function(e,n,a){Y(),i[n][a].hide=!1,i[n][a].x=n,i[n][a].y=a,m(l(i)),M({}),V(),ie(!1)}(0,n,a)},ce=function(){return(0,o.jsx)("div",{className:"chessOut",children:i.map((function(e,n){return(0,o.jsx)("div",{className:"out",children:e.map((function(e,i){return(0,o.jsx)("div",{className:"inline ".concat(e.id&&"0"===e.id[0]?"black":"red"," ").concat(e.hide?"hide":""," ").concat(e.hide||g.x!==n||g.y!==i?"":"selected"),onClick:function(){return te(e,n,i)},children:e.name&&(0,o.jsx)("div",{className:"chess",children:e.name})},i)}))},n)}))})};return(0,o.jsxs)("div",{className:"chess_page",style:{backgroundImage:"url(".concat(C,")")},children:[(0,o.jsx)(t.Z,{}),(0,o.jsxs)("div",{className:"tip_btns",children:[(0,o.jsx)("div",{className:"tip_chess ".concat("0"===T?"black":"red"),children:"0"===T?"\u5c06":"\u5e05"}),(0,o.jsx)(d.Z,{disabled:ne,onClick:function(){m(l(w)),V(),ie(!0),F(N.black),P(N.red)},className:"btn",variant:"contained",children:"Redo"})]}),(0,o.jsxs)("div",{className:"blood",children:[(0,o.jsxs)("div",{className:"blood_item black",children:[(0,o.jsx)("div",{className:"label",children:"\u5c06"}),(0,o.jsx)("div",{className:"value",children:(0,o.jsx)("div",{className:"mask",style:{width:Q}})})]}),(0,o.jsxs)("div",{className:"blood_item red",children:[(0,o.jsx)("div",{className:"label",children:"\u5e05"}),(0,o.jsx)("div",{className:"value",children:(0,o.jsx)("div",{className:"mask",style:{width:U}})})]})]}),(0,o.jsx)(ce,{}),(0,o.jsx)(c.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:X,children:I?(0,o.jsx)(s.Z,{severity:"warning",children:I}):(0,o.jsx)("div",{})})]})}}}]);