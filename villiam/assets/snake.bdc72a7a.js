import{d as J,r as v,c as O,k as I,o as j,b as z,e as s,t as k,g as l,C as G,f as P,p as V,j as $,_ as q}from"./index.6ac86003.js";const C=h=>(V("data-v-e1a3e450"),h=h(),$(),h),H={class:"snake_container"},K=C(()=>s("div",{style:{height:"10px"}},null,-1)),Q=C(()=>s("div",{style:{height:"10px"}},null,-1)),W=C(()=>s("div",{style:{height:"10px"}},null,-1)),X=["width","height"],Y=J({__name:"snake",setup(h){function b(e,n,o){e.fillStyle=n,e.fillRect(...o)}function D(e){return b.bind(null,e)}let t={snake:[[0,100],[10,100],[20,100],[30,100],[40,100]],headColor:"#ff5732",bodyColor:"#3cb056",foodColor:"#ff5732",time:15,w:400,h:300},c,w=null,p=null,_=v("ArrowRight"),u=v(0),m=O(()=>u.value<=0?1:u.value>=10?10:u.value);const i=10;let r=v("unStart"),a=[],d=v([0,0]),A=()=>{};const R=()=>{p||(w=document.getElementById("ctx"),p=w==null?void 0:w.getContext("2d")),c=D(p),c("#eee",[0,0,t.w,t.h])},L=new Map([["ArrowRight",["ArrowUp","ArrowDown"]],["ArrowLeft",["ArrowUp","ArrowDown"]],["ArrowUp",["ArrowLeft","ArrowRight"]],["ArrowDown",["ArrowLeft","ArrowRight"]]]);document.addEventListener("keydown",e=>{e.preventDefault();const n=e.code;B(n)});function B(e){var n;["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(e)&&r.value==="start"&&((n=L.get(_.value))==null?void 0:n.includes(e))&&(_.value=e)}function E(){c(t.foodColor,[...d.value,i,i])}function M(){a.forEach((e,n)=>{c(n===a.length-1?t.headColor:t.bodyColor,[...e,i,i])})}function F(){d.value[0]=(Math.random()*(t.w-9)/10|0)*10,d.value[1]=(Math.random()*(t.h-9)/10|0)*10}function T(){if(r.value!=="start")return;const e=_.value,n=a[a.length-1],o=[n[0],n[1]];if(e==="ArrowRight"||e==="ArrowLeft"?o[0]=o[0]+10*(e==="ArrowRight"?1:-1):o[1]=o[1]+10*(e==="ArrowDown"?1:-1),o[0]<0&&(o[0]=t.w-10),o[1]<0&&(o[1]=t.h-10),o[0]>t.w-10&&(o[0]=0),o[1]>t.h-10&&(o[1]=0),a.push(o),!U(o)){const x=a.shift();c("#eee",[x[0],x[1],i,i])}}function U(e){return e[0]===d.value[0]&&e[1]===d.value[1]?(u.value++,f.value+=m.value<=5?10-m.value:5,A(),A=y(),F(),!0):!1}function y(){const e=setInterval(()=>{r.value==="start"&&(T(),E(),M())},110-m.value*10);return()=>{clearInterval(e)}}let f=v(10),g=()=>{};function N(){const e=setInterval(()=>{f.value--},1e3);return()=>{clearInterval(e)}}I(()=>f.value,e=>{e<=0&&(r.value="unStart",alert("\u6E38\u620F\u7ED3\u675F,\u4F60\u7684\u5F97\u5206\u662F"+u.value),p.clearRect(0,0,t.w,t.h),R())}),I(()=>r.value,e=>{switch(e){case"start":g=N();break;case"unStart":g(),S();break;case"pause":g();break}});function S(){a=JSON.parse(JSON.stringify(t.snake)),f.value=t.time,F(),u.value=0,_.value="ArrowRight",A(),A=y()}return j(()=>{R(),S()}),(e,n)=>(P(),z("div",H,[s("button",{onClick:n[0]||(n[0]=o=>G(r)?r.value=l(r)==="start"?"pause":"start":r=l(r)==="start"?"pause":"start")},k(l(r)==="start"?"\u6682\u505C":"\u5F00\u59CB")+"\u6E38\u620F ",1),K,s("div",null,"\u5F97\u5206: "+k(l(u)),1),Q,s("div",null,"\u6E38\u620F\u89C4\u5219: \u522B\u8BA9\u98DF\u7269\u66B4\u9732\u5728\u7A7A\u6C14"+k(l(f))+"\u79D2!!!",1),W,s("canvas",{id:"ctx",width:l(t).w,height:l(t).h},null,8,X)]))}});const ee=q(Y,[["__scopeId","data-v-e1a3e450"]]);export{ee as default};
