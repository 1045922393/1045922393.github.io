import{v as J}from"./vertical.f8758d93.js";import{d as O,r as v,j,k as I,o as z,c as G,a as s,t as k,A as l,E as P,f as V,p as $,g as q,_ as H}from"./index.6be707e4.js";const R=h=>($("data-v-24a71a64"),h=h(),q(),h),K={class:"snake_container"},Q=R(()=>s("div",{style:{height:"10px"}},null,-1)),W=R(()=>s("div",{style:{height:"10px"}},null,-1)),X=R(()=>s("div",{style:{height:"10px"}},null,-1)),Y=["width","height"],Z=O({__name:"snake",setup(h){J.setup();function D(e,r,o){e.fillStyle=r,e.fillRect(...o)}function b(e){return D.bind(null,e)}let t={snake:[[0,100],[10,100],[20,100],[30,100],[40,100]],headColor:"#ff5732",bodyColor:"#3cb056",foodColor:"#ff5732",time:15,w:400,h:300},c,p=null,w=null,_=v("ArrowRight"),a=v(0),m=j(()=>a.value<=0?1:a.value>=10?10:a.value);const i=10;let n=v("unStart"),u=[],d=v([0,0]),A=()=>{};const C=()=>{w||(p=document.getElementById("ctx"),w=p==null?void 0:p.getContext("2d")),c=b(w),c("#eee",[0,0,t.w,t.h])},E=new Map([["ArrowRight",["ArrowUp","ArrowDown"]],["ArrowLeft",["ArrowUp","ArrowDown"]],["ArrowUp",["ArrowLeft","ArrowRight"]],["ArrowDown",["ArrowLeft","ArrowRight"]]]);document.addEventListener("keydown",e=>{e.preventDefault();const r=e.code;L(r)});function L(e){var r;["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(e)&&n.value==="start"&&((r=E.get(_.value))==null?void 0:r.includes(e))&&(_.value=e)}function B(){c(t.foodColor,[...d.value,i,i])}function M(){u.forEach((e,r)=>{c(r===u.length-1?t.headColor:t.bodyColor,[...e,i,i])})}function F(){d.value[0]=(Math.random()*(t.w-9)/10|0)*10,d.value[1]=(Math.random()*(t.h-9)/10|0)*10}function T(){if(n.value!=="start")return;const e=_.value,r=u[u.length-1],o=[r[0],r[1]];if(e==="ArrowRight"||e==="ArrowLeft"?o[0]=o[0]+10*(e==="ArrowRight"?1:-1):o[1]=o[1]+10*(e==="ArrowDown"?1:-1),o[0]<0&&(o[0]=t.w-10),o[1]<0&&(o[1]=t.h-10),o[0]>t.w-10&&(o[0]=0),o[1]>t.h-10&&(o[1]=0),u.push(o),!U(o)){const x=u.shift();c("#eee",[x[0],x[1],i,i])}}function U(e){return e[0]===d.value[0]&&e[1]===d.value[1]?(a.value++,f.value+=m.value<=5?10-m.value:5,A(),A=y(),F(),!0):!1}function y(){const e=setInterval(()=>{n.value==="start"&&(T(),B(),M())},110-m.value*10);return()=>{clearInterval(e)}}let f=v(10),g=()=>{};function N(){const e=setInterval(()=>{f.value--},1e3);return()=>{clearInterval(e)}}I(()=>f.value,e=>{e<=0&&(n.value="unStart",alert("\u6E38\u620F\u7ED3\u675F,\u4F60\u7684\u5F97\u5206\u662F"+a.value),w.clearRect(0,0,t.w,t.h),C())}),I(()=>n.value,e=>{switch(e){case"start":g=N();break;case"unStart":g(),S();break;case"pause":g();break}});function S(){u=JSON.parse(JSON.stringify(t.snake)),f.value=t.time,F(),a.value=0,_.value="ArrowRight",A(),A=y()}return z(()=>{C(),S()}),(e,r)=>(V(),G("div",K,[s("button",{onClick:r[0]||(r[0]=o=>P(n)?n.value=l(n)==="start"?"pause":"start":n=l(n)==="start"?"pause":"start")},k(l(n)==="start"?"\u6682\u505C":"\u5F00\u59CB")+"\u6E38\u620F ",1),Q,s("div",null,"\u5F97\u5206: "+k(l(a)),1),W,s("div",null,"\u6E38\u620F\u89C4\u5219: \u522B\u8BA9\u98DF\u7269\u66B4\u9732\u5728\u7A7A\u6C14"+k(l(f))+"\u79D2!!!",1),X,s("canvas",{id:"ctx",width:l(t).w,height:l(t).h},null,8,Y)]))}});const oe=H(Z,[["__scopeId","data-v-24a71a64"]]);export{oe as default};
